<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class Email_Parse | ElkArte 1.0.5 Documentation</title>

	<link rel="stylesheet" href="resources/bootstrap.min.css?973e37a8502921d56bc02bb55321f45b072b6f71">
	<link rel="stylesheet" href="resources/style.css?70c1d062672daa3f906b72e4f5d03d4bc5c4174d">

</head>

<body>
	<nav id="navigation" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<a href="index.html" class="navbar-brand">ElkArte 1.0.5 Documentation</a>
			</div>
			<div class="collapse navbar-collapse">

                <form id="search" class="navbar-form navbar-left" role="search">
                    <input type="hidden" name="cx" value="">
                    <input type="hidden" name="ie" value="UTF-8">
                    <div class="form-group">
                        <input type="text" name="q" class="search-query form-control" placeholder="Search">
					</div>
				</form>

				<ul class="nav navbar-nav">
					<li>
<span>Package</span>					</li>
					<li class="active">
<span>Class</span>					</li>

					<li class="divider-vertical"></li>

					<li>
						<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
					</li>

						<li>
							<a href="annotation-group-deprecated.html" title="List of elements with deprecated annotation">
								<span>Deprecated</span>
							</a>
						</li>
						<li>
							<a href="annotation-group-todo.html" title="List of elements with todo annotation">
								<span>Todo</span>
							</a>
						</li>

					<li class="divider-vertical"></li>

					<li>
						<a href="-API-documentation.zip" title="Download documentation as ZIP archive"><span>Download</span></a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div id="left">
	<div id="menu">

		<div id="groups">
				<h3>Packages</h3>
			<ul>
					<li>
						<a href="package-AddonSettings.html">
							AddonSettings						</a>
							</li>
					<li>
						<a href="package-Admin.html">
							Admin						</a>
							</li>
					<li>
						<a href="package-AdminLog.html">
							AdminLog						</a>
							</li>
					<li>
						<a href="package-Attachments.html">
							Attachments						</a>
							</li>
					<li>
						<a href="package-Authorization.html">
							Authorization						</a>
							</li>
					<li>
						<a href="package-Avatars.html">
							Avatars						</a>
							</li>
					<li>
						<a href="package-BadBehavior.html">
							BadBehavior						</a>
							</li>
					<li>
						<a href="package-Bans.html">
							Bans						</a>
							</li>
					<li>
						<a href="package-BBC.html">
							BBC						</a>
							</li>
					<li>
						<a href="package-Boards.html">
							Boards						</a>
							</li>
					<li>
						<a href="package-Calendar.html">
							Calendar						</a>
							</li>
					<li>
						<a href="package-CoreFeatures.html">
							CoreFeatures						</a>
							</li>
					<li>
						<a href="package-Drafts.html">
							Drafts						</a>
							</li>
					<li>
						<a href="package-Graphics.html">
							Graphics						</a>
							</li>
					<li>
						<a href="package-Karma.html">
							Karma						</a>
							</li>
					<li>
						<a href="package-Languages.html">
							Languages						</a>
							</li>
					<li>
						<a href="package-Likes.html">
							Likes						</a>
							</li>
					<li>
						<a href="package-Mail.html">
							Mail						</a>
							</li>
					<li>
						<a href="package-Maillist.html">
							Maillist						</a>
							</li>
					<li>
						<a href="package-Maintenance.html">
							Maintenance						</a>
							</li>
					<li>
						<a href="package-Membergroups.html">
							Membergroups						</a>
							</li>
					<li>
						<a href="package-Members.html">
							Members						</a>
							</li>
					<li>
						<a href="package-Mentions.html">
							Mentions						</a>
							</li>
					<li>
						<a href="package-News.html">
							News						</a>
							</li>
					<li>
						<a href="package-None.html">
							None						</a>
							</li>
					<li>
						<a href="package-Packages.html">
							Packages						</a>
							</li>
					<li>
						<a href="package-Permissions.html">
							Permissions						</a>
							</li>
					<li>
						<a href="package-PersonalMessage.html">
							PersonalMessage						</a>
							</li>
					<li>
						<a href="package-Posts.html">
							Posts						</a>
							</li>
					<li>
						<a href="package-Registration.html">
							Registration						</a>
							</li>
					<li>
						<a href="package-ScheduledTasks.html">
							ScheduledTasks						</a>
							</li>
					<li>
						<a href="package-Search.html">
							Search						</a>
							</li>
					<li>
						<a href="package-SearchEngines.html">
							SearchEngines						</a>
							</li>
					<li>
						<a href="package-Security.html">
							Security						</a>
							</li>
					<li>
						<a href="package-Subscriptions.html">
							Subscriptions						</a>
							</li>
					<li>
						<a href="package-Themes.html">
							Themes						</a>
							</li>
			</ul>
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Email_Format.html">Email_Format</a></li>
				<li class="active"><a href="class-Email_Parse.html">Email_Parse</a></li>
				<li><a href="class-Email_Settings.html">Email_Settings</a></li>
				<li><a href="class-Emailpost_Controller.html">Emailpost_Controller</a></li>
				<li><a href="class-ManageMaillist_Controller.html">ManageMaillist_Controller</a></li>
			</ul>





			<h3>Functions</h3>
			<ul>
				<li><a href="function-enable_maillist_imap_cron.html">enable_maillist_imap_cron</a></li>
				<li><a href="function-list_count_filter_parser.html">list_count_filter_parser</a></li>
				<li><a href="function-list_get_filter_parser.html">list_get_filter_parser</a></li>
				<li><a href="function-list_maillist_count_unapproved.html">list_maillist_count_unapproved</a></li>
				<li><a href="function-list_maillist_unapproved.html">list_maillist_unapproved</a></li>
				<li><a href="function-log_email.html">log_email</a></li>
				<li><a href="function-maillist_board_list.html">maillist_board_list</a></li>
				<li><a href="function-maillist_delete_error_entry.html">maillist_delete_error_entry</a></li>
				<li><a href="function-maillist_delete_filter_parser.html">maillist_delete_filter_parser</a></li>
				<li><a href="function-maillist_load_filter_parser.html">maillist_load_filter_parser</a></li>
				<li><a href="function-maillist_templates.html">maillist_templates</a></li>
				<li><a href="function-pbe_check_moderation.html">pbe_check_moderation</a></li>
				<li><a href="function-pbe_clean_email_subject.html">pbe_clean_email_subject</a></li>
				<li><a href="function-pbe_create_pm.html">pbe_create_pm</a></li>
				<li><a href="function-pbe_create_post.html">pbe_create_post</a></li>
				<li><a href="function-pbe_create_topic.html">pbe_create_topic</a></li>
				<li><a href="function-pbe_email_attachments.html">pbe_email_attachments</a></li>
				<li><a href="function-pbe_email_quote_depth.html">pbe_email_quote_depth</a></li>
				<li><a href="function-pbe_email_to_bbc.html">pbe_email_to_bbc</a></li>
				<li><a href="function-pbe_emailError.html">pbe_emailError</a></li>
				<li><a href="function-pbe_filter_email_message.html">pbe_filter_email_message</a></li>
				<li><a href="function-pbe_find_board_number.html">pbe_find_board_number</a></li>
				<li><a href="function-pbe_fix_client_quotes.html">pbe_fix_client_quotes</a></li>
				<li><a href="function-pbe_fix_email_body.html">pbe_fix_email_body</a></li>
				<li><a href="function-pbe_fix_email_quotes.html">pbe_fix_email_quotes</a></li>
				<li><a href="function-pbe_load_text.html">pbe_load_text</a></li>
				<li><a href="function-pbe_parse_email_message.html">pbe_parse_email_message</a></li>
				<li><a href="function-pbe_prepare_text.html">pbe_prepare_text</a></li>
				<li><a href="function-pbe_str_replace_once.html">pbe_str_replace_once</a></li>
				<li><a href="function-query_get_theme.html">query_get_theme</a></li>
				<li><a href="function-query_key_maintenance.html">query_key_maintenance</a></li>
				<li><a href="function-query_key_owner.html">query_key_owner</a></li>
				<li><a href="function-query_load_board.html">query_load_board</a></li>
				<li><a href="function-query_load_board_details.html">query_load_board_details</a></li>
				<li><a href="function-query_load_message.html">query_load_message</a></li>
				<li><a href="function-query_load_permissions.html">query_load_permissions</a></li>
				<li><a href="function-query_load_subject.html">query_load_subject</a></li>
				<li><a href="function-query_load_user_info.html">query_load_user_info</a></li>
				<li><a href="function-query_mark_pms.html">query_mark_pms</a></li>
				<li><a href="function-query_notifications.html">query_notifications</a></li>
				<li><a href="function-query_sender_wrapper.html">query_sender_wrapper</a></li>
				<li><a href="function-query_update_member_stats.html">query_update_member_stats</a></li>
				<li><a href="function-query_user_keys.html">query_user_keys</a></li>
				<li><a href="function-updateParserFilterOrder.html">updateParserFilterOrder</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class Email_Parse</h1>


	<div class="description">
	<p>Class to parse and email in to its header and body parts for use in posting</p>

<p>What it does:
- Can read from a supplied string, stdin or from the failed email database
- Parses and decodes headers, return them in a named array $headers
- Parses, decodes and translates message body returns body and plain_body sections
- Parses and decodes attachments returns attachments and inline_files</p>

<p>Load class
Initiate as - $email_message = new EmailParse();</p>

<p>Make the call, loads data and performs all need parsing
- $email_message->read_email(true); // Read data and parse it, prefer html section</p>

<p>Just load data:
- $email_message->read_data(); // load data from stdin
- $email_message->read_data($data); // load data from a supplied string</p>

<p>Get some email details:
- $email_message->headers // All the headers in an array
- $email_message->body // The decoded / translated message
- $email_message->raw_message // The entire message w/headers as read
- $email_message->plain_body // The plain text version of the message
- $email_message->attachments // Any attachments with key = filename</p>

<p>Optional functions:
- $email_message->load_address(); // Returns array with to/from/cc addresses
- $email_message->load_key(); // Returns the security key is found, also sets
message_key_id, message_type and message_id
- $email_message->load_spam(); // Returns boolean on if spam headers are set
- $email_message->load_ip(); // Set ip origin of the email if available
- $email_message->load_returnpath(); // Load the message return path</p>
	</div>









	<div class="alert alert-info">
		
		
		
		<b>Package:</b> <a href="package-Maillist.html">Maillist</a><br>

				<b>Copyright:</b>
				ElkArte Forum contributors<br>
				<b>License:</b>
				<a href="BSD">http://opensource.org/licenses/BSD-3-Clause</a><br>
			<b>Located at</b> <a href="source-class-Email_Parse.html#17-1070" title="Go to source code">sources/subs/EmailParse.class.php</a>
		<br>
	</div>



		<div class="panel panel-default">
			<div class="panel-heading"><h2>Methods summary</h2></div>
			<table class="summary table table-bordered table-striped methods" id="methods">
		<tr data-order="read_data" id="_read_data">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_read_data">#</a>
			<code><a href="source-class-Email_Parse.html#182-214" title="Go to source code">read_data</a>( <span>string <var>$data</var> = <span class="php-quote">''</span></span>, <span>string <var>$location</var> = <span class="php-quote">''</span></span> )</code>

			<div class="description short">
				<p>Loads an email message from stdin, file or from a supplied string</p>
			</div>

			<div class="description detailed hidden">
				<p>Loads an email message from stdin, file or from a supplied string</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$data</var></dt>
						<dd>optional, if supplied must be a full headers+body email string</dd>
						<dt><var>$location</var></dt>
						<dd>optional, used for debug</dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_query_load_email" id="__query_load_email">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__query_load_email">#</a>
			<code><a href="source-class-Email_Parse.html#216-242" title="Go to source code">_query_load_email</a>( <span>integer <var>$id</var></span> )</code>

			<div class="description short">
				<p>Loads an email message from the database</p>
			</div>

			<div class="description detailed hidden">
				<p>Loads an email message from the database</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$id</var></dt>
						<dd>id of the email to retrieve from the failed log</dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="read_email" id="_read_email">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_read_email">#</a>
			<code><a href="source-class-Email_Parse.html#244-271" title="Go to source code">read_email</a>( <span>boolean <var>$html</var> = <span class="php-keyword1">false</span></span>, <span>string <var>$data</var> = <span class="php-quote">''</span></span>, <span>string <var>$location</var> = <span class="php-quote">''</span></span> )</code>

			<div class="description short">
				<p>Main email routine, calls the needed functions to parse the data so that
its available.</p>
			</div>

			<div class="description detailed hidden">
				<p>Main email routine, calls the needed functions to parse the data so that
its available.</p>

<p>What it does:
- read/load data
- split headers from the body
- break header string in to individual header keys
- determine content type and character encoding
- convert message body's</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$html</var></dt>
						<dd><ul>
<li>flag to determine if we are saving html or not</li>
</ul></dd>
						<dt><var>$data</var></dt>
						<dd><ul>
<li>full header+message string</li>
</ul></dd>
						<dt><var>$location</var></dt>
						<dd><ul>
<li>optional, used for debug</li>
</ul></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_split_headers" id="__split_headers">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__split_headers">#</a>
			<code><a href="source-class-Email_Parse.html#273-295" title="Go to source code">_split_headers</a>( )</code>

			<div class="description short">
				<p>Separate the email message headers from the message body</p>
			</div>

			<div class="description detailed hidden">
				<p>Separate the email message headers from the message body</p>

<p>The header is separated from the body by
1 the first empty line or
2 a line that does not start with a tab, a field name followed by a colon or a space</p>







			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_headers" id="__parse_headers">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_headers">#</a>
			<code><a href="source-class-Email_Parse.html#297-331" title="Go to source code">_parse_headers</a>( )</code>

			<div class="description short">
				<p>Takes the header block created with _split_headers and separates it
in to header keys => value pairs</p>
			</div>

			<div class="description detailed hidden">
				<p>Takes the header block created with _split_headers and separates it
in to header keys => value pairs</p>







			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_content_headers" id="__parse_content_headers">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_content_headers">#</a>
			<code><a href="source-class-Email_Parse.html#333-369" title="Go to source code">_parse_content_headers</a>( )</code>

			<div class="description short">
				<p>Content headers need to be set so we can properly decode the message body.</p>
			</div>

			<div class="description detailed hidden">
				<p>Content headers need to be set so we can properly decode the message body.</p>

<p>What it does:
- Content headers often use the optional parameter value syntax which need to be
specially processed.
- Parses or sets defaults for the following:
content-type, content-disposition, content-transfer-encoding</p>







			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_content_header_parameters" id="__parse_content_header_parameters">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_content_header_parameters">#</a>
			<code><a href="source-class-Email_Parse.html#371-408" title="Go to source code">_parse_content_header_parameters</a>( <span>string <var>$value</var></span>, <span>string <var>$key</var></span> )</code>

			<div class="description short">
				<p>Checks if a given header has any optional parameter values</p>
			</div>

			<div class="description detailed hidden">
				<p>Checks if a given header has any optional parameter values</p>

<p>A header like Content-type: text/plain; charset=iso-8859-1 will become
- headers[Content-type] = text/plain
- headers['x-parameters'][charset] = iso-8859-1</p>

<p>If parameters are found, sets the primary value to the given key and the additional
values are placed to our catch all x-parameters key. Done this way to prevent
overwriting a primary header key with a secondary one</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$value</var></dt>
						<dd></dd>
						<dt><var>$key</var></dt>
						<dd></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_body" id="__parse_body">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_body">#</a>
			<code><a href="source-class-Email_Parse.html#410-581" title="Go to source code">_parse_body</a>( <span>boolean <var>$html</var> = <span class="php-keyword1">false</span></span> )</code>

			<div class="description short">
				<p>Based on the the message content type, determine how to best proceed</p>
			</div>

			<div class="description detailed hidden">
				<p>Based on the the message content type, determine how to best proceed</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$html</var></dt>
						<dd></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_boundary_split" id="__boundary_split">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__boundary_split">#</a>
			<code><a href="source-class-Email_Parse.html#583-610" title="Go to source code">_boundary_split</a>( <span>string <var>$boundary</var></span>, <span>boolean <var>$html</var></span> )</code>

			<div class="description short">
				<p>Split up multipart messages and process each section separately
as its own email object</p>
			</div>

			<div class="description detailed hidden">
				<p>Split up multipart messages and process each section separately
as its own email object</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$boundary</var></dt>
						<dd></dd>
						<dt><var>$html</var></dt>
						<dd><ul>
<li>flag to indicate html content</li>
</ul></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_decode_header" id="__decode_header">

			<td class="attributes"><code>
				 private 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__decode_header">#</a>
			<code><a href="source-class-Email_Parse.html#612-685" title="Go to source code">_decode_header</a>( <span>string <var>$val</var></span>, <span>boolean <var>$strict</var> = <span class="php-keyword1">false</span></span> )</code>

			<div class="description short">
				<p>Converts a header string to ascii/UTF8</p>
			</div>

			<div class="description detailed hidden">
				<p>Converts a header string to ascii/UTF8</p>

<p>What it does:
- Headers, mostly subject and names may be encoded as quoted printable or base64
to allow for non ascii characters in those fields.
- This encoding is separate from the message body encoding and must be
determined since this encoding is not directly specified by the headers themselves</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$val</var></dt>
						<dd></dd>
						<dt><var>$strict</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						string
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="_decode_body" id="__decode_body">

			<td class="attributes"><code>
				 private 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__decode_body">#</a>
			<code><a href="source-class-Email_Parse.html#687-733" title="Go to source code">_decode_body</a>( <span>string <var>$val</var></span> )</code>

			<div class="description short">
				<p>Checks the body text to see if it may need to be further decoded</p>
			</div>

			<div class="description detailed hidden">
				<p>Checks the body text to see if it may need to be further decoded</p>

<p>What it does:
- Sadly whats in the body text is not always what the header claims, or the
header is just wrong. Copy/paste in to email from other apps etc.
This does an extra check for quoted printable DNA and if found decodes the
message as such.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$val</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						string
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_returnpath" id="_load_returnpath">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_returnpath">#</a>
			<code><a href="source-class-Email_Parse.html#735-752" title="Go to source code">load_returnpath</a>( )</code>

			<div class="description short">
				<p>Find the message return_path and well return it</p>
			</div>

			<div class="description detailed hidden">
				<p>Find the message return_path and well return it</p>



					<h4>Returns</h4>
					<div class="list">
						string<br>or null
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_subject" id="_load_subject">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_subject">#</a>
			<code><a href="source-class-Email_Parse.html#754-771" title="Go to source code">load_subject</a>( )</code>

			<div class="description short">
				<p>Returns the decoded subject of the email</p>
			</div>

			<div class="description detailed hidden">
				<p>Returns the decoded subject of the email</p>

<ul>
<li>Makes sure the subject header is set, if not sets it to ''</li>
</ul>



					<h4>Returns</h4>
					<div class="list">
						string<br>or null
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_key" id="_load_key">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_key">#</a>
			<code><a href="source-class-Email_Parse.html#773-845" title="Go to source code">load_key</a>( <span>string <var>$key</var> = <span class="php-quote">''</span></span> )</code>

			<div class="description short">
				<p>Check for the message security key in common headers, in-reply-to and references</p>
			</div>

			<div class="description detailed hidden">
				<p>Check for the message security key in common headers, in-reply-to and references</p>

<ul>
<li>If the key is not found in the header, will search the message body</li>
<li>If the key is still not found will search the entire input stream</li>
<li>returns the found key or false.  If found will also save it in the in-reply-to header</li>
</ul>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var></dt>
						<dd>optional</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						string<br>of key of false on failure
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_address" id="_load_address">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_address">#</a>
			<code><a href="source-class-Email_Parse.html#847-894" title="Go to source code">load_address</a>( )</code>

			<div class="description short">
				<p>Loads in the most email from, to and cc address</p>
			</div>

			<div class="description detailed hidden">
				<p>Loads in the most email from, to and cc address</p>

<ul>
<li>will attempt to return the name and address for fields "name:" <email></li>
<li>will become email['to'] = email and email['to_name'] = name</li>
</ul>



					<h4>Returns</h4>
					<div class="list">
						array<br>of addresses
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_ip" id="_load_ip">

			<td class="attributes"><code>
				 public 
				string|boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_ip">#</a>
			<code><a href="source-class-Email_Parse.html#896-921" title="Go to source code">load_ip</a>( )</code>

			<div class="description short">
				<p>Finds the message sending ip and returns it</p>
			</div>

			<div class="description detailed hidden">
				<p>Finds the message sending ip and returns it</p>

<ul>
<li>will look in various header fields where the ip may reside</li>
<li>returns false if it can't find a valid IP4</li>
</ul>



					<h4>Returns</h4>
					<div class="list">
						string|boolean<br>on fail
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="load_spam" id="_load_spam">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load_spam">#</a>
			<code><a href="source-class-Email_Parse.html#923-948" title="Go to source code">load_spam</a>( )</code>

			<div class="description short">
				<p>Finds if any spam headers have been positively set and returns that flag</p>
			</div>

			<div class="description detailed hidden">
				<p>Finds if any spam headers have been positively set and returns that flag</p>

<ul>
<li>will look in various header fields where the spam status may reside</li>
</ul>



					<h4>Returns</h4>
					<div class="list">
						boolean<br>on fail
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_ip" id="__parse_ip">

			<td class="attributes"><code>
				 private 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_ip">#</a>
			<code><a href="source-class-Email_Parse.html#950-965" title="Go to source code">_parse_ip</a>( <span>string <var>$string</var></span> )</code>

			<div class="description short">
				<p>Validates that the ip is a valid ip4 address</p>
			</div>

			<div class="description detailed hidden">
				<p>Validates that the ip is a valid ip4 address</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$string</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="_parse_address" id="__parse_address">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__parse_address">#</a>
			<code><a href="source-class-Email_Parse.html#967-1006" title="Go to source code">_parse_address</a>( <span>string <var>$val</var></span> )</code>

			<div class="description short">
				<p>Take an email address and parse out the email address and email name</p>
			</div>

			<div class="description detailed hidden">
				<p>Take an email address and parse out the email address and email name</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$val</var></dt>
						<dd></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_decode_string" id="__decode_string">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__decode_string">#</a>
			<code><a href="source-class-Email_Parse.html#1008-1028" title="Go to source code">_decode_string</a>( <span>string <var>$string</var></span>, <span>string <var>$encoding</var></span>, <span>string <var>$charset</var> = <span class="php-quote">''</span></span> )</code>

			<div class="description short">
				<p>Decodes base64 or quoted-printable strings
Converts from one character set to utf-8</p>
			</div>

			<div class="description detailed hidden">
				<p>Decodes base64 or quoted-printable strings
Converts from one character set to utf-8</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$string</var></dt>
						<dd></dd>
						<dt><var>$encoding</var></dt>
						<dd></dd>
						<dt><var>$charset</var></dt>
						<dd></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="_charset_convert" id="__charset_convert">

			<td class="attributes"><code>
				 private 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__charset_convert">#</a>
			<code><a href="source-class-Email_Parse.html#1030-1069" title="Go to source code">_charset_convert</a>( <span>string <var>$string</var></span>, <span>string <var>$from</var></span>, <span>string <var>$to</var></span> )</code>

			<div class="description short">
				<p>Pick the best possible function to convert a strings character set, if any exist</p>
			</div>

			<div class="description detailed hidden">
				<p>Pick the best possible function to convert a strings character set, if any exist</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$string</var></dt>
						<dd></dd>
						<dt><var>$from</var></dt>
						<dd></dd>
						<dt><var>$to</var></dt>
						<dd></dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
			</table>
		</div>











		<div class="panel panel-default">
            <div class="panel-heading"><h2>Properties summary</h2></div>
			<table class="summary table table-bordered table-striped properties" id="properties">
		<tr data-order="raw_message" id="$raw_message">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#56-60" title="Go to source code"><var>$raw_message</var></a>

				<div class="description short">
					<p>The full message section (headers, body, etc) we are working on</p>
				</div>

				<div class="description detailed hidden">
					<p>The full message section (headers, body, etc) we are working on</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$raw_message" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="attachments" id="$attachments">
			<td class="attributes"><code>
				public  
				string[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#62-66" title="Go to source code"><var>$attachments</var></a>

				<div class="description short">
					<p>Attachments found after the message</p>
				</div>

				<div class="description detailed hidden">
					<p>Attachments found after the message</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$attachments" class="anchor">#</a>
					<code><span class="php-keyword1">array</span>()</code>
				</div>
			</td>
		</tr>
		<tr data-order="inline_files" id="$inline_files">
			<td class="attributes"><code>
				public  
				string[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#68-72" title="Go to source code"><var>$inline_files</var></a>

				<div class="description short">
					<p>Attachments that we designated as inline with the text</p>
				</div>

				<div class="description detailed hidden">
					<p>Attachments that we designated as inline with the text</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$inline_files" class="anchor">#</a>
					<code><span class="php-keyword1">array</span>()</code>
				</div>
			</td>
		</tr>
		<tr data-order="body" id="$body">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#74-78" title="Go to source code"><var>$body</var></a>

				<div class="description short">
					<p>Parsed and decoded message body, may be plain text or html</p>
				</div>

				<div class="description detailed hidden">
					<p>Parsed and decoded message body, may be plain text or html</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$body" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="plain_body" id="$plain_body">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#80-84" title="Go to source code"><var>$plain_body</var></a>

				<div class="description short">
					<p>Parsed and decoded message body, only plain text version</p>
				</div>

				<div class="description detailed hidden">
					<p>Parsed and decoded message body, only plain text version</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$plain_body" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="headers" id="$headers">
			<td class="attributes"><code>
				public  
				mixed[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#86-90" title="Go to source code"><var>$headers</var></a>

				<div class="description short">
					<p>All of the parsed message headers</p>
				</div>

				<div class="description detailed hidden">
					<p>All of the parsed message headers</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$headers" class="anchor">#</a>
					<code><span class="php-keyword1">array</span>()</code>
				</div>
			</td>
		</tr>
		<tr data-order="message_key_id" id="$message_key_id">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#92-96" title="Go to source code"><var>$message_key_id</var></a>

				<div class="description short">
					<p>Full security key</p>
				</div>

				<div class="description detailed hidden">
					<p>Full security key</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$message_key_id" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="message_type" id="$message_type">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#98-102" title="Go to source code"><var>$message_type</var></a>

				<div class="description short">
					<p>Message type of the key p, m or t</p>
				</div>

				<div class="description detailed hidden">
					<p>Message type of the key p, m or t</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$message_type" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="html_found" id="$html_found">
			<td class="attributes"><code>
				public  
				boolean
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#104-108" title="Go to source code"><var>$html_found</var></a>

				<div class="description short">
					<p>If an html was found in the message</p>
				</div>

				<div class="description detailed hidden">
					<p>If an html was found in the message</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$html_found" class="anchor">#</a>
					<code><span class="php-keyword1">false</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="spam_found" id="$spam_found">
			<td class="attributes"><code>
				public  
				boolean
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#110-114" title="Go to source code"><var>$spam_found</var></a>

				<div class="description short">
					<p>If any positive spam headers were found in the message</p>
				</div>

				<div class="description detailed hidden">
					<p>If any positive spam headers were found in the message</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$spam_found" class="anchor">#</a>
					<code><span class="php-keyword1">false</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="message_id" id="$message_id">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#116-120" title="Go to source code"><var>$message_id</var></a>

				<div class="description short">
					<p>Message id of the key</p>
				</div>

				<div class="description detailed hidden">
					<p>Message id of the key</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$message_id" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="return_path" id="$return_path">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#122-126" title="Go to source code"><var>$return_path</var></a>

				<div class="description short">
					<p>Holds the return path as set in the email header</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the return path as set in the email header</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$return_path" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="subject" id="$subject">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#128-132" title="Go to source code"><var>$subject</var></a>

				<div class="description short">
					<p>Holds the message subject</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the message subject</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$subject" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="email" id="$email">
			<td class="attributes"><code>
				public  
				mixed[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#134-138" title="Go to source code"><var>$email</var></a>

				<div class="description short">
					<p>Holds the email to from &amp; cc emails and names</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the email to from &amp; cc emails and names</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$email" class="anchor">#</a>
					<code><span class="php-keyword1">array</span>()</code>
				</div>
			</td>
		</tr>
		<tr data-order="ip" id="$ip">
			<td class="attributes"><code>
				public  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#140-144" title="Go to source code"><var>$ip</var></a>

				<div class="description short">
					<p>Holds the sending ip of the email</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the sending ip of the email</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$ip" class="anchor">#</a>
					<code><span class="php-keyword1">false</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="_converted_utf8" id="$_converted_utf8">
			<td class="attributes"><code>
				public  
				boolean
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#146-150" title="Go to source code"><var>$_converted_utf8</var></a>

				<div class="description short">
					<p>If the file was converted to utf8</p>
				</div>

				<div class="description detailed hidden">
					<p>If the file was converted to utf8</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_converted_utf8" class="anchor">#</a>
					<code><span class="php-keyword1">false</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="_email_address" id="$_email_address">
			<td class="attributes"><code>
				private  
				mixed[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#152-156" title="Go to source code"><var>$_email_address</var></a>

				<div class="description short">
					<p>Holds the current email address, to, from, cc</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the current email address, to, from, cc</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_email_address" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="_email_name" id="$_email_name">
			<td class="attributes"><code>
				private  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#158-162" title="Go to source code"><var>$_email_name</var></a>

				<div class="description short">
					<p>Holds the current email name</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds the current email name</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_email_name" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="_boundary_section" id="$_boundary_section">
			<td class="attributes"><code>
				private  
				string[]
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#164-168" title="Go to source code"><var>$_boundary_section</var></a>

				<div class="description short">
					<p>Holds each boundary section of the message</p>
				</div>

				<div class="description detailed hidden">
					<p>Holds each boundary section of the message</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_boundary_section" class="anchor">#</a>
					<code><span class="php-keyword1">array</span>()</code>
				</div>
			</td>
		</tr>
		<tr data-order="_boundary_section_count" id="$_boundary_section_count">
			<td class="attributes"><code>
				private  
				integer
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#170-174" title="Go to source code"><var>$_boundary_section_count</var></a>

				<div class="description short">
					<p>The total number of boundary sections</p>
				</div>

				<div class="description detailed hidden">
					<p>The total number of boundary sections</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_boundary_section_count" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
		<tr data-order="_header_block" id="$_header_block">
			<td class="attributes"><code>
				private  
				string
			</code></td>

			<td class="name">
					<a href="source-class-Email_Parse.html#176-180" title="Go to source code"><var>$_header_block</var></a>

				<div class="description short">
					<p>The message header block</p>
				</div>

				<div class="description detailed hidden">
					<p>The message header block</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_header_block" class="anchor">#</a>
					<code><span class="php-keyword1">null</span></code>
				</div>
			</td>
		</tr>
			</table>
		</div>






</div>
	</div>

	<div id="footer">
		ElkArte 1.0.5 Documentation API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
<script src="resources/combined.js"></script>
<script src="elementlist.js"></script>
</body>
</html>
